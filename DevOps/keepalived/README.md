# keepalived

keepalived å®ç°çš„åŠŸèƒ½å¦‚ä¸‹:

ä»¥ä¸‹ç¤ºä¾‹ä»¥ä¸¤å°ä¸»æœºä¸ºä¾‹ï¼Œä¸»æœº IP åˆ†åˆ«ä¸º 192.168.31.10 å’Œ 192.168.31.11ï¼Œæˆ‘ä»¬çš„ç›®æ ‡æ˜¯åœ¨è¿™ä¸¤å°ä¸»æœºä¸Šé…ç½® keepalivedï¼Œä»¥å®ç°è™šæ‹Ÿ IP (VIP) çš„é«˜å¯ç”¨æ€§ã€‚

0. **ä¸¤å°ä¸»æœºä¹‹é—´çš„å…³ç³»ï¼š**

    ```shell
    +---------------------+   VIP: 192.168.31.100    +--------------------+
    |                     | <----------------------> |                    |
    |  Master             |     VRRP Protocol        |  Backup            |
    |  (Active)           |                          |  (Standby)         |
    | IP: 192.168.31.10   |                          | IP: 192.168.31.11  |
    +---------------------+                          +--------------------+
    ```

    åœ¨è¿™ä¸ªç®€å•çš„å­—ç¬¦å›¾ä¸­ï¼Œ"Master" ä¸»æœºæ˜¯æ´»åŠ¨çš„ï¼Œå®ƒå…·æœ‰è™šæ‹Ÿ IP åœ°å€ï¼ˆVIP: 192.168.31.100ï¼‰ã€‚è€Œ "Backup" ä¸»æœºæ˜¯å¤‡ç”¨çš„ï¼Œå®ƒåœ¨ç­‰å¾…æ¥ç®¡ VIPã€‚å½“ "Master" ä¸»æœºå‘ç”Ÿæ•…éšœæ—¶ï¼Œ"Backup" ä¸»æœºå°†ç«‹å³æ¥ç®¡ VIPï¼Œä¿è¯äº†æœåŠ¡çš„é«˜å¯ç”¨æ€§ã€‚è¿™ä¸¤å°ä¸»æœºé€šè¿‡ VRRP åè®®è¿›è¡Œé€šä¿¡ï¼Œåè°ƒ VIP çš„æ‰€æœ‰æƒã€‚


## ç®€ä»‹

keepalived æ˜¯ä¸€æ¬¾èƒ½å¸®åŠ©ä½ å®ç°é«˜å¯ç”¨æœåŠ¡çš„å¼€æºå·¥å…·ã€‚å®ƒä¸»è¦é€šè¿‡åˆ›å»ºä¸€ä¸ªè™šæ‹Ÿ IPï¼ˆVIPï¼‰æ¥å·¥ä½œã€‚å¯ä»¥è¿™æ ·ç†è§£ï¼šä½ æœ‰ä¸¤å°æˆ–æ›´å¤šçš„æœåŠ¡å™¨ï¼Œå®ƒä»¬éƒ½è¿è¡Œç€ç›¸åŒçš„æœåŠ¡ã€‚ä¸ºäº†å®ç°è¿™äº›æœåŠ¡çš„é«˜å¯ç”¨ï¼Œä½ å¯ä»¥ä½¿ç”¨ keepalived åœ¨å…¶ä¸­ä¸€å°æœåŠ¡å™¨ä¸Šåˆ›å»ºä¸€ä¸ª VIPï¼Œè¿™å°æœåŠ¡å™¨æˆ‘ä»¬ç§°ä¹‹ä¸ºä¸»æœåŠ¡å™¨ã€‚æ‰€æœ‰çš„å®¢æˆ·ç«¯è¿æ¥éƒ½ä¼šåˆ°è¿™ä¸ª VIPï¼Œå®é™…ä¸Šä¹Ÿå°±æ˜¯è¿æ¥åˆ°äº†ä¸»æœåŠ¡å™¨ã€‚

keepalived çš„èªæ˜ä¹‹å¤„åœ¨äºï¼Œå®ƒä¼šä¸æ–­æ£€æŸ¥ä¸»æœåŠ¡å™¨çš„çŠ¶æ€ã€‚å¦‚æœä¸»æœåŠ¡å™¨å‡ºç°æ•…éšœï¼Œkeepalived å°±ä¼šæŠŠ VIP å¿«é€Ÿè¿ç§»åˆ°å¦ä¸€å°å¤‡ç”¨æœåŠ¡å™¨ä¸Šã€‚è¿™æ ·ï¼Œå®¢æˆ·ç«¯å°±èƒ½æ— ç¼åœ°ç»§ç»­ä»–ä»¬çš„å·¥ä½œï¼Œä»–ä»¬ç”šè‡³å¯èƒ½éƒ½æ²¡æœ‰å¯Ÿè§‰åˆ°åå°æœåŠ¡å™¨å·²ç»åˆ‡æ¢ã€‚

è¦å®ç°è¿™ç§é«˜æ•ˆçš„åˆ‡æ¢ï¼Œkeepalived ä½¿ç”¨äº†ä¸€ç§åä¸º VRRP (Virtual Router Redundancy Protocol) çš„åè®®ã€‚åŒæ—¶ï¼Œå®ƒè¿˜åˆ©ç”¨äº† ARP (Address Resolution Protocol) åè®®æ¥ä½¿å¾—ç½‘ç»œè®¾å¤‡çŸ¥é“ VIP å·²ç»è¿ç§»åˆ°äº†æ–°çš„ä¸»æœºä¸Šã€‚è¿™ç§æœºåˆ¶å…è®¸ keepalived åœ¨æ•…éšœå‘ç”Ÿæ—¶è¿…é€Ÿåˆ‡æ¢æœåŠ¡å™¨ï¼Œä½¿å¾—æœåŠ¡ä¿æŒé«˜å¯ç”¨æ€§ã€‚

## VRRP åè®®

VRRPï¼ˆVirtual Router Redundancy Protocolï¼‰å³è™šæ‹Ÿè·¯ç”±å™¨å†—ä½™åè®®ï¼Œæ˜¯ä¸€ç§ç½‘ç»œåè®®ï¼Œç”¨äºåˆ›å»ºä¸€ä¸ªè™šæ‹Ÿçš„è·¯ç”±å™¨ï¼Œå®ƒç”±ä¸¤å°æˆ–æ›´å¤šçš„ç‰©ç†è·¯ç”±å™¨ç»„æˆã€‚è¿™äº›è·¯ç”±å™¨å…±äº«ä¸€ä¸ªè™šæ‹ŸIPåœ°å€ã€‚VRRPåè®®å¯ä»¥ä¿è¯åœ¨ç‰©ç†è·¯ç”±å™¨å‡ºç°æ•…éšœæ—¶ï¼Œç½‘ç»œä¸­çš„å…¶ä»–æœºå™¨ä»ç„¶å¯ä»¥é€šè¿‡è¿™ä¸ªè™šæ‹ŸIPåœ°å€è¿›è¡Œé€šä¿¡ã€‚

åœ¨ä¸€ç»„VRRPè·¯ç”±å™¨ä¸­ï¼Œæœ‰ä¸€ä¸ªè·¯ç”±å™¨è¢«é€‰ä¸ºä¸»è·¯ç”±å™¨ï¼Œå…¶ä½™çš„è·¯ç”±å™¨ä½œä¸ºå¤‡ä»½ã€‚ä¸»è·¯ç”±å™¨æ‹¥æœ‰å’Œè™šæ‹Ÿè·¯ç”±å™¨ç›¸åŒçš„IPåœ°å€ï¼Œå¹¶è´Ÿè´£è½¬å‘åˆ°è™šæ‹Ÿè·¯ç”±å™¨IPåœ°å€çš„æ•°æ®åŒ…ã€‚å¦‚æœä¸»è·¯ç”±å™¨å‡ºç°æ•…éšœï¼Œå¤‡ä»½è·¯ç”±å™¨ä¹‹ä¸€å°†æ¥ç®¡IPåœ°å€å’Œç›¸åº”çš„æ•°æ®åŒ…è½¬å‘ä»»åŠ¡ã€‚

VRRPåè®®æ˜¯ä¸€ç§åŸºäºä¼˜å…ˆçº§çš„åè®®ï¼Œæ¯å°å‚ä¸çš„è·¯ç”±å™¨éƒ½æœ‰ä¸€ä¸ªé…ç½®çš„ä¼˜å…ˆçº§ã€‚ä¸»è·¯ç”±å™¨æ˜¯ä¼˜å…ˆçº§æœ€é«˜çš„è·¯ç”±å™¨ã€‚å¦‚æœä¸¤å°æˆ–æ›´å¤šçš„è·¯ç”±å™¨ä¼˜å…ˆçº§ç›¸åŒï¼Œé‚£ä¹ˆå°±ä¼šæ ¹æ®å®ƒä»¬çš„ç‰©ç†IPåœ°å€æ¥é€‰æ‹©ä¸€ä¸ªä¸»è·¯ç”±å™¨ï¼ŒIPåœ°å€é«˜çš„æˆä¸ºä¸»è·¯ç”±å™¨ã€‚å½“ä¸»è·¯ç”±å™¨å‡ºç°æ•…éšœæ—¶ï¼Œä¼˜å…ˆçº§æ¬¡é«˜çš„è·¯ç”±å™¨å°†ä¼šæˆä¸ºæ–°çš„ä¸»è·¯ç”±å™¨ã€‚

VRRPä½¿ç”¨å®šæœŸçš„å¹¿æ’­æ¶ˆæ¯æ¥ç»´æŒé›†ç¾¤çš„çŠ¶æ€ï¼Œè¿™ä¸ªæ¶ˆæ¯ç§°ä¸ºVRRP Advertisementã€‚ä¸»è·¯ç”±å™¨å®šæœŸå‘é€VRRP Advertisementæ¶ˆæ¯ï¼Œå‘Šè¯‰å¤‡ä»½è·¯ç”±å™¨å®ƒè¿˜åœ¨æ­£å¸¸å·¥ä½œã€‚å¦‚æœå¤‡ä»½è·¯ç”±å™¨åœ¨ä¸€æ®µæ—¶é—´å†…æ²¡æœ‰æ”¶åˆ°è¿™ä¸ªæ¶ˆæ¯ï¼Œå®ƒä»¬å°†å¼€å§‹è¿›è¡Œæ–°ä¸€è½®çš„ä¸»è·¯ç”±å™¨é€‰ä¸¾ã€‚

æ€»çš„æ¥è¯´ï¼ŒVRRPåè®®é€šè¿‡è™šæ‹Ÿè·¯ç”±å™¨å’Œä¸»/å¤‡æ¨¡å¼ï¼Œä¿è¯äº†åœ¨ç‰©ç†è·¯ç”±å™¨å‡ºç°æ•…éšœæ—¶ï¼Œç½‘ç»œçš„æ­£å¸¸é€šä¿¡ä¸ä¼šå—åˆ°å½±å“ã€‚

> ğŸ™‹ğŸ»â€â™‚ï¸ è·¯ç”±å™¨è¿™ä¸ªè¯å¬èµ·æ¥è®©äººå›°æƒ‘ï¼Œä»–ä¸æ˜¯é…ç½®åœ¨ä¸»æœº VM ä¸Šçš„å—ï¼Œæ€ä¹ˆå«è·¯ç”±å™¨å‘¢ï¼Œæ˜¯ä¸æ˜¯è¿™ä¸ªåè®®è®¾è®¡ä¹‹åˆæ˜¯ç”¨åœ¨è·¯ç”±å™¨ä¸Šçš„ã€‚

> æ˜¯çš„ï¼Œä½ çš„ç†è§£æ˜¯æ­£ç¡®çš„ã€‚VRRPï¼ˆVirtual Router Redundancy Protocolï¼‰è™½ç„¶åå­—ä¸­åŒ…å«"è·¯ç”±å™¨"ï¼Œä½†è¿™å¹¶ä¸æ„å‘³ç€å®ƒåªèƒ½åœ¨ç‰©ç†è·¯ç”±å™¨è®¾å¤‡ä¸Šä½¿ç”¨ã€‚åœ¨è®¡ç®—æœºç½‘ç»œæœ¯è¯­ä¸­ï¼Œ"è·¯ç”±å™¨"å¸¸å¸¸è¢«ç”¨æ¥æ³›æŒ‡ä»»ä½•æ‰§è¡Œè·¯ç”±åŠŸèƒ½çš„è®¾å¤‡æˆ–è½¯ä»¶ï¼Œæ— è®ºå®ƒä»¬æ˜¯ç‰©ç†è®¾å¤‡è¿˜æ˜¯è™šæ‹Ÿè®¾å¤‡ã€‚ä¾‹å¦‚ï¼Œä¸€å°è¿è¡Œç€è·¯ç”±è½¯ä»¶çš„æœåŠ¡å™¨ï¼Œä¹Ÿå¯ä»¥è¢«ç§°ä¸ºè·¯ç”±å™¨ã€‚

> ç¡®å®ï¼ŒVRRPåœ¨è®¾è®¡ä¹‹åˆä¸»è¦æ˜¯ä¸ºäº†åœ¨ç‰©ç†è·¯ç”±å™¨è®¾å¤‡ä¸Šæä¾›å†—ä½™ã€‚ç„¶è€Œï¼Œéšç€è™šæ‹ŸåŒ–æŠ€æœ¯å’Œäº‘è®¡ç®—çš„å‘å±•ï¼ŒVRRPä¹Ÿè¢«å¹¿æ³›ç”¨åœ¨è™šæ‹Ÿç¯å¢ƒä¸­ï¼ŒåŒ…æ‹¬è™šæ‹Ÿæœºå’Œå®¹å™¨ã€‚ä¾‹å¦‚ï¼ŒKubernetesä¸­çš„keepalivedæ’ä»¶å°±ä½¿ç”¨äº†VRRPåè®®ï¼Œå®ç°äº†åœ¨KubernetesèŠ‚ç‚¹ä¹‹é—´çš„IPåœ°å€å†—ä½™ã€‚
> æ‰€ä»¥ï¼Œåœ¨è¿™é‡Œï¼Œå½“æˆ‘ä»¬è°ˆè®º"VRRPè·¯ç”±å™¨"æ—¶ï¼Œå®é™…ä¸Šæ˜¯æŒ‡æ‰§è¡Œäº†è·¯ç”±åŠŸèƒ½çš„ä»»ä½•å®ä½“ï¼Œæ— è®ºæ˜¯ç‰©ç†è®¾å¤‡ã€è™šæ‹Ÿæœºï¼Œè¿˜æ˜¯è¿è¡Œåœ¨å®¹å™¨ä¸­çš„è½¯ä»¶ã€‚

### VRRP Advertisementæ¶ˆæ¯

VRRP Advertisementæ¶ˆæ¯æ˜¯VRRPåè®®ä¸­æœ€å…³é”®çš„æ¶ˆæ¯ç±»å‹ã€‚å®ƒç”±Masterè·¯ç”±å™¨å‘¨æœŸæ€§åœ°å‘é€ï¼Œç”¨äºå£°æ˜å…¶å¯¹è™šæ‹Ÿè·¯ç”±å™¨çš„æ§åˆ¶æƒï¼Œå¹¶å‘ŠçŸ¥å…¶ä»–è·¯ç”±å™¨å…¶ä¼˜å…ˆçº§ã€‚å®ƒåŒ…å«ä»¥ä¸‹å…³é”®å­—æ®µï¼š

1. **Version**ï¼šVRRPåè®®çš„ç‰ˆæœ¬å·ã€‚å½“å‰çš„ç‰ˆæœ¬æ˜¯VRRPv3ã€‚

2. **Type**ï¼šæ¶ˆæ¯çš„ç±»å‹ã€‚å¯¹äºVRRP Advertisementæ¶ˆæ¯ï¼Œæ­¤å­—æ®µçš„å€¼æ˜¯1ã€‚

3. **Virtual Router ID (VRID)**ï¼šæ ‡è¯†è™šæ‹Ÿè·¯ç”±å™¨çš„IDã€‚æ­¤å­—æ®µçš„å€¼ç”±ç®¡ç†å‘˜é…ç½®ï¼Œå¹¶ä¸”åœ¨åŒä¸€ç½‘ç»œä¸­å¿…é¡»æ˜¯å”¯ä¸€çš„ã€‚

4. **Priority**ï¼šå‘é€æ­¤æ¶ˆæ¯çš„è·¯ç”±å™¨çš„ä¼˜å…ˆçº§ã€‚ä¼˜å…ˆçº§çš„èŒƒå›´æ˜¯0åˆ°255ã€‚ä¼˜å…ˆçº§é«˜çš„è·¯ç”±å™¨æ›´æœ‰å¯èƒ½æˆä¸ºMasterã€‚å¦‚æœMasterè·¯ç”±å™¨å®•æœºï¼Œå…·æœ‰æ¬¡é«˜ä¼˜å…ˆçº§çš„è·¯ç”±å™¨å°†æ¥ç®¡Masterçš„è§’è‰²ã€‚

5. **Advertisement Interval**ï¼šå‘é€VRRP Advertisementæ¶ˆæ¯çš„é—´éš”æ—¶é—´ï¼Œå•ä½æ˜¯ç§’ã€‚è¿™æ˜¯Masterè·¯ç”±å™¨é€šçŸ¥å…¶æ´»åŠ¨çŠ¶æ€çš„é¢‘ç‡ã€‚

6. **Checksum**ï¼šæ¶ˆæ¯çš„æ ¡éªŒå’Œï¼Œç”¨äºæ£€æµ‹æ¶ˆæ¯åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­æ˜¯å¦è¢«æŸåã€‚

ä»¥ä¸Šå°±æ˜¯VRRP Advertisementæ¶ˆæ¯çš„ä¸»è¦å­—æ®µã€‚è¿™äº›å­—æ®µæä¾›äº†VRRPåè®®æ‰€éœ€çš„æ‰€æœ‰ä¿¡æ¯ï¼Œä»¥åè°ƒå¤šä¸ªè·¯ç”±å™¨ï¼Œå¹¶ç¡®å®šå“ªä¸ªè·¯ç”±å™¨åº”æˆä¸ºMasterï¼Œä»è€Œå®ç°è™šæ‹ŸIPåœ°å€çš„é«˜å¯ç”¨æ€§ã€‚

> ğŸ™‹ğŸ»â€â™‚ï¸ VRRP Advertisementæ¶ˆæ¯å·¥ä½œåœ¨ç½‘ç»œåè®®çš„ç¬¬å‡ å±‚

> VRRP (Virtual Router Redundancy Protocol) æ˜¯ä¸€ä¸ªç½‘ç»œå±‚åè®®ã€‚åœ¨ç½‘ç»œåè®®ä¸­ï¼ŒVRRPé€šå¸¸åœ¨IPåè®®ä¹‹ä¸Šå·¥ä½œï¼Œä½†æ˜¯å®ƒå¹¶ä¸æ˜¯ä¼ è¾“å±‚åè®®ï¼Œå› æ­¤ï¼ŒVRRP Advertisement æ¶ˆæ¯æ˜¯å·¥ä½œåœ¨ç½‘ç»œå±‚ã€‚

## ç®€å•çš„ä½¿ç”¨

ä»¥ä¸‹ç¤ºä¾‹ä»¥ä¸¤å°ä¸»æœºä¸ºä¾‹ï¼Œä¸»æœº IP åˆ†åˆ«ä¸º 192.168.31.10 å’Œ 192.168.31.11ï¼Œæˆ‘ä»¬çš„ç›®æ ‡æ˜¯åœ¨è¿™ä¸¤å°ä¸»æœºä¸Šé…ç½® keepalivedï¼Œä»¥å®ç°è™šæ‹Ÿ IP (VIP) çš„é«˜å¯ç”¨æ€§ã€‚

0. **ä¸¤å°ä¸»æœºä¹‹é—´çš„å…³ç³»ï¼š**

    ```shell
    +---------------------+   VIP: 192.168.31.100    +--------------------+
    |                     | <----------------------> |                    |
    |  Master             |     VRRP Protocol        |  Backup            |
    |  (Active)           |                          |  (Standby)         |
    | IP: 192.168.31.10   |                          | IP: 192.168.31.11  |
    +---------------------+                          +--------------------+
    ```

    åœ¨è¿™ä¸ªç®€å•çš„å­—ç¬¦å›¾ä¸­ï¼Œ"Master" ä¸»æœºæ˜¯æ´»åŠ¨çš„ï¼Œå®ƒå…·æœ‰è™šæ‹Ÿ IP åœ°å€ï¼ˆVIP: 192.168.31.100ï¼‰ã€‚è€Œ "Backup" ä¸»æœºæ˜¯å¤‡ç”¨çš„ï¼Œå®ƒåœ¨ç­‰å¾…æ¥ç®¡ VIPã€‚å½“ "Master" ä¸»æœºå‘ç”Ÿæ•…éšœæ—¶ï¼Œ"Backup" ä¸»æœºå°†ç«‹å³æ¥ç®¡ VIPï¼Œä¿è¯äº†æœåŠ¡çš„é«˜å¯ç”¨æ€§ã€‚è¿™ä¸¤å°ä¸»æœºé€šè¿‡ VRRP åè®®è¿›è¡Œé€šä¿¡ï¼Œåè°ƒ VIP çš„æ‰€æœ‰æƒã€‚


1. **åœ¨ä¸¤å°ä¸»æœºä¸Šå®‰è£… keepalived**ï¼š

   å¯¹äºå¤§éƒ¨åˆ† Linux å‘è¡Œç‰ˆï¼Œä½ å¯ä»¥ä½¿ç”¨åŒ…ç®¡ç†å™¨æ¥å®‰è£… keepalivedï¼š

   åœ¨ Ubuntu ä¸Š:
   ```shell
   sudo apt-get install keepalived
   ```
   åœ¨ CentOS ä¸Š:
   ```shell
   sudo yum install keepalived
   ```

2. **åœ¨ä¸¤å°ä¸»æœºä¸Šé…ç½® keepalived**ï¼š

   keepalived çš„é…ç½®æ–‡ä»¶é€šå¸¸ä½äº `/etc/keepalived/keepalived.conf`ã€‚ä»¥ä¸‹æ˜¯ä¸¤å°ä¸»æœºçš„é…ç½®æ–‡ä»¶ç¤ºä¾‹ï¼š

   **åœ¨ 192.168.31.10 ä¸»æœºä¸Šï¼ˆMASTERï¼‰**ï¼š

   ```shell
   vrrp_instance VI_1 {
       state MASTER
       interface eth0
       virtual_router_id 51
       priority 101
       advert_int 1
       authentication {
           auth_type PASS
           auth_pass 1111
       }
       virtual_ipaddress {
           192.168.31.100
       }
   }
   ```
   
   **åœ¨ 192.168.31.11 ä¸»æœºä¸Šï¼ˆBACKUPï¼‰**ï¼š

   ```shell
   vrrp_instance VI_1 {
       state BACKUP
       interface eth0
       virtual_router_id 51
       priority 100
       advert_int 1
       authentication {
           auth_type PASS
           auth_pass 1111
       }
       virtual_ipaddress {
           192.168.31.100
       }
   }
   ```
   
   åœ¨è¿™é‡Œï¼Œ`state` å‚æ•°å®šä¹‰äº†è¿™å°ä¸»æœºçš„è§’è‰²ï¼ŒMASTER æˆ– BACKUPï¼›`virtual_router_id` å®šä¹‰äº† VRRP å®ä¾‹çš„ IDï¼ŒåŒä¸€ä¸ª VRRP å®ä¾‹çš„è¿™ä¸ªå€¼éœ€è¦ä¸€è‡´ï¼›`priority` å®šä¹‰äº† VRRP ä¼˜å…ˆçº§ï¼Œæ•°å€¼è¶Šé«˜ä¼˜å…ˆçº§è¶Šé«˜ï¼ŒMASTER çš„ä¼˜å…ˆçº§åº”è¯¥é«˜äº BACKUPï¼›`auth_type` å’Œ `auth_pass` å®šä¹‰äº† VRRP å®ä¾‹çš„è®¤è¯æ–¹å¼å’Œå¯†ç ï¼ŒåŒä¸€ä¸ª VRRP å®ä¾‹çš„è¿™ä¸ªå€¼ä¹Ÿéœ€è¦ä¸€è‡´ï¼›`virtual_ipaddress` å®šä¹‰äº† VIPï¼ŒåŒä¸€ä¸ª VRRP å®ä¾‹çš„è¿™ä¸ªå€¼éœ€è¦ä¸€è‡´ã€‚

3. **åœ¨ä¸¤å°ä¸»æœºä¸Šå¯åŠ¨ keepalived æœåŠ¡**ï¼š

   é…ç½®å®Œæˆåï¼Œä½ å¯ä»¥ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤æ¥å¯åŠ¨ keepalived æœåŠ¡ï¼š

   ```shell
   sudo systemctl start keepalived
   ```
   
   è¿™æ ·ï¼Œä¸¤å°ä¸»æœºå°±ä¼šå¼€å§‹è¿è¡Œ keepalivedï¼Œå¹¶é€šè¿‡ VRRP åè®®ä¿æŒé€šè®¯ï¼Œå½“ MASTER ä¸»æœºä¸å¯ç”¨æ—¶ï¼ŒBACKUP ä¸»æœºä¼šæ¥ç®¡ VIPï¼Œä¿è¯æœåŠ¡çš„å¯ç”¨æ€§ã€‚